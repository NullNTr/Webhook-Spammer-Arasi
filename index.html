<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Webhook Control</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  min-height:100vh;
  background:#000;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:system-ui,sans-serif;
  color:#fee2e2;
}
.container{
  width:94%;
  max-width:540px;
  padding:24px;
  background:linear-gradient(145deg,#1a0000,#000);
  border-radius:18px;
  border:1px solid #7f1d1d;
  box-shadow:0 0 40px rgba(239,68,68,.35);
}
h1{
  text-align:center;
  margin-bottom:18px;
  font-size:26px;
  background:linear-gradient(90deg,#fecaca,#ef4444,#7f1d1d);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
input,textarea{
  width:100%;
  box-sizing:border-box;
  margin-top:10px;
  padding:13px;
  border-radius:12px;
  background:#000;
  color:#fee2e2;
  border:1px solid #7f1d1d;
  outline:none;
  font-size:14px;
}
textarea{resize:none}
.tokens{height:120px}
.msg{height:130px}
.row{
  display:flex;
  gap:10px;
}
.row input{flex:1}
button{
  width:100%;
  margin-top:14px;
  padding:15px;
  font-size:16px;
  font-weight:bold;
  border-radius:14px;
  border:none;
  cursor:pointer;
  color:white;
}
.send{
  background:linear-gradient(135deg,#dc2626,#ef4444,#7f1d1d);
}
.stop{
  background:linear-gradient(135deg,#374151,#111827);
}
.status{
  margin-top:12px;
  text-align:center;
  font-size:13px;
  color:#fca5a5;
}
.log{
  margin-top:10px;
  font-size:12px;
  max-height:100px;
  overflow:auto;
  color:#fecaca;
}
</style>
</head>

<body>
<div class="container">
  <h1>Webhook</h1>

  <!-- ğŸ”½ ã“ã“ãŒå¤‰æ›´ç‚¹ -->
  <textarea id="urls" class="tokens" placeholder="Webhookãƒˆãƒ¼ã‚¯ãƒ³ã‚’æ”¹è¡Œã§æœ€å¤§50å€‹ã¾ã§è²¼ã‚Šä»˜ã‘"></textarea>

  <input id="name" placeholder="Webhookå">

  <textarea id="msg" class="msg" maxlength="500" placeholder="é€ä¿¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆæœ€å¤§500æ–‡å­—ï¼‰"></textarea>

  <div class="row">
    <input id="interval" type="number" value="1000" min="500" placeholder="é–“éš”(ms)">
    <input id="limit" type="number" placeholder="å›æ•°ï¼ˆç©ºï¼ç„¡é™ï¼‰">
  </div>

  <button class="send" onclick="start()">å®Ÿè¡Œ</button>
  <button class="stop" onclick="stop()">åœæ­¢</button>

  <div class="status" id="status">å¾…æ©Ÿä¸­</div>
  <div class="status">ç·é€ä¿¡å›æ•°: <span id="count">0</span></div>
  <div class="log" id="log"></div>
</div>

<script>
let timers=[];
let running=false;
let count=0;

function log(t){
  const l=document.getElementById("log");
  l.innerHTML+=t+"<br>";
  l.scrollTop=l.scrollHeight;
}

function start(){
  if(running) return;

  const urls = document.getElementById("urls").value
    .split("\n")
    .map(v=>v.trim())
    .filter(v=>v);

  const msg = msgEl.value.trim();
  const interval = parseInt(intervalEl.value)||1000;
  const limit = parseInt(limitEl.value)||Infinity;

  if(urls.length === 0){
    statusEl.textContent="ãƒˆãƒ¼ã‚¯ãƒ³ãŒã‚ã‚Šã¾ã›ã‚“";
    return;
  }
  if(urls.length > 50){
    statusEl.textContent="ãƒˆãƒ¼ã‚¯ãƒ³ã¯æœ€å¤§50å€‹ã¾ã§";
    return;
  }
  if(!msg){
    statusEl.textContent="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒç©ºã§ã™";
    return;
  }

  running=true;
  count=0;
  countEl.textContent="0";
  statusEl.textContent="é€ä¿¡ä¸­â€¦ åœæ­¢ã§å…¨åœæ­¢";
  log(`â–¶ é€ä¿¡é–‹å§‹ (${urls.length} ãƒˆãƒ¼ã‚¯ãƒ³)`);

  urls.forEach(url=>{
    send(url);
    const t=setInterval(()=>{
      if(count>=limit){
        stop();
        return;
      }
      send(url);
    },interval);
    timers.push(t);
  });
}

function send(url){
  fetch(url,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({
      content:msgEl.value,
      username:nameEl.value||"Webhook"
    })
  }).then(()=>{
    count++;
    countEl.textContent=count;
    log("âœ” é€ä¿¡æˆåŠŸ");
  }).catch(()=>{
    log("âœ– é€ä¿¡å¤±æ•—");
  });
}

function stop(){
  timers.forEach(t=>clearInterval(t));
  timers=[];
  running=false;
  statusEl.textContent="åœæ­¢ã—ã¾ã—ãŸ";
  log("â–  åœæ­¢");
}

const msgEl=document.getElementById("msg");
const nameEl=document.getElementById("name");
const intervalEl=document.getElementById("interval");
const limitEl=document.getElementById("limit");
const statusEl=document.getElementById("status");
const countEl=document.getElementById("count");
</script>
</body>
</html>
